<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="🚰 Data Flows" href="flows.html" /><link rel="prev" title="Example Data Flow Integration" href="index.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.03.04"/>
        <title>🚀 Getting started - IFU DataFlow 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=935aa2abcc5c1da4283d1dc201fb1f0add16d23a" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">IFU DataFlow 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">IFU DataFlow 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">🚀 Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="flows.html">🚰 Data Flows</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="getting-started">
<h1>🚀 Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h1>
<div class="figure align-default" id="id1">
<span id="fig-data-flow-scheme"></span><div class="mermaid">
            flowchart LR
    id1("Station 🗼") -- ftp --&gt; id2("File Server 📁")
    subgraph "Prefect Data Flow Orchestration (🤖)"
    id2 --  "F1 🤖"--&gt; id3("Lvl0 Check (GE) 🔎") -- "F2 🤖: STA Ingest" --&gt; id5[("Frost ❄️")]
    id5 -- "F3 🤖"--&gt; id6("Lvl1 Check (SaQC) 🔎")
    id6 -.-&gt; id7[("Archive 🗄")]
    end
    id5 &lt;--access--&gt; id9("Grafana 📊")
    id6 --reporting--&gt; id8("PI 🧑‍🔬")
    id8 --approve--&gt; id7
    id7 &lt;-- access --&gt; id10("WWW 🌍")
    click id5 href "http://172.27.80.119:8093/FROST-Server/v1.1" _blank
    click id7 href "https://thredds.imk-ifu.kit.edu:9670/thredds/catalog.html" _blank
        </div><p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">Data Flow Integration</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</div>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default" id="table-tools">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Core tools used in the setup</span><a class="headerlink" href="#table-tools" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="text-left head"><p></p></th>
<th class="text-center head"><p>type</p></th>
<th class="text-center head"><p>description</p></th>
<th class="text-right head"><p>reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>stantic</p></td>
<td class="text-center"><p>🐍 lib</p></td>
<td class="text-center"><p>SensorThings API interface library</p></td>
<td class="text-right"><p><a class="reference external" href="https://github.com/cwerner/stantic">code</a>, <a class="reference external" href="https://cwerner.github.io/stantic/">docs</a></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>SaQC</p></td>
<td class="text-center"><p>🐍 lib</p></td>
<td class="text-center"><p>QC library</p></td>
<td class="text-right"><p><a class="reference external" href="https://git.ufz.de/rdm-software/saqc">code</a>, <a class="reference external" href="https://rdm-software.pages.ufz.de/saqc/index.html">docs</a></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Prefect</p></td>
<td class="text-center"><p>🐍 lib, ✨ service</p></td>
<td class="text-center"><p>Orchestration and dataflow automation platform</p></td>
<td class="text-right"><p><a class="reference external" href="https://github.com/PrefectHQ/prefect">code</a>, <a class="reference external" href="https://orion-docs.prefect.io">docs</a>, <a class="reference external" href="https://www.prefect.io">home</a></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>FROST</p></td>
<td class="text-center"><p>✨ service</p></td>
<td class="text-center"><p>Server implementation of the OGC SensorThings API</p></td>
<td class="text-right"><p><a class="reference external" href="https://github.com/FraunhoferIOSB/FROST-Server">code</a>, <a class="reference external" href="https://fraunhoferiosb.github.io/FROST-Server/">docs</a>, <a class="reference external" href="https://www.iosb.fraunhofer.de/de/projekte-produkte/frostserver.html">home</a></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>THREDDS</p></td>
<td class="text-center"><p>✨ service</p></td>
<td class="text-center"><p>Thematic Real-time Environmental Distributed Data Services data server</p></td>
<td class="text-right"><p><a class="reference external" href="https://github.com/Unidata/tds">code</a>, <a class="reference external" href="https://docs.unidata.ucar.edu/tds/5.3/userguide/index.html">docs</a>, <a class="reference external" href="https://www.unidata.ucar.edu/software/tds/">home</a></p></td>
</tr>
</tbody>
</table></div>
<div class="section" id="data-ingestion">
<h2>Data ingestion<a class="headerlink" href="#data-ingestion" title="Permalink to this headline">#</a></h2>
<p>Data at IMK-IFU is currently reaching the institute via <code class="docutils literal notranslate"><span class="pre">ftp</span></code> upload or <code class="docutils literal notranslate"><span class="pre">nextcloud-based</span> <span class="pre">sync</span></code> schedules. This usually happens once or twice a day.</p>
</div>
<div class="section" id="first-quality-control">
<h2>First Quality Control<a class="headerlink" href="#first-quality-control" title="Permalink to this headline">#</a></h2>
<p>Right after data is transfered to the institute, a basic data quality check is performed. Here, simple things as size of new data package, number of columns and rows, nodata occurance etc. are validated. All these checks work on daily data packages so trends or trend deviations can not be detected. Missing data or any failed data expectations immediately trigger a warning email since they indicate measurement or transfer failures. A continuation of the data flow is dependent on the outcome of the test (currently any issue is a hard no - so the execution of the pipeline will stop).</p>
</div>
<div class="section" id="ingestion-into-sta-frost-server">
<h2>Ingestion into STA Frost Server<a class="headerlink" href="#ingestion-into-sta-frost-server" title="Permalink to this headline">#</a></h2>
<p>Once data passed the initial stage, a subset of datastreams is parsed and loaded into the <a class="reference external" href="http://172.27.80.119:8093/FROST-Server/v1.1">FROST server</a> using a second Prefect Flow and the <a class="reference external" href="https://github.com/cwerner/stantic">stantic python library</a>. This flow is not schedule but rather triggered by the data level0 check flow. Grafana dashboards allow a quick inspection into raw data once the data is pushed into the server.</p>
</div>
<div class="section" id="second-quality-control">
<h2>Second Quality Control<a class="headerlink" href="#second-quality-control" title="Permalink to this headline">#</a></h2>
<p>In this stage data is checked in a more thorough way. In addition to simple range checks, checks for trend breaks or other unexpected occurences are performed. These checks require multiple batches of data and thus cannot easily run at the ingest stage. This quality control stage will also run daily. <a class="reference external" href="https://git.ufz.de/rdm-software/saqc">SaQC</a> will be used to analyse a running window of data (i.e. previous 7 or 30 days) and aid in preparing a report for the relevant PI. After approval by the PI, the data will be marked as ready for archival.</p>
</div>
<div class="section" id="data-archive">
<h2>Data archive<a class="headerlink" href="#data-archive" title="Permalink to this headline">#</a></h2>
<p>After the approval of an PI the data will be ingested into the final datasets. This might be timeseries data on <a class="reference external" href="https://thredds.imk-ifu.kit.edu:9670/thredds/catalog.html">THREDDS</a> or other data formats.</p>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="flows.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">🚰 Data Flows</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Christian Werner
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">🚀 Getting started</a><ul>
<li><a class="reference internal" href="#data-ingestion">Data ingestion</a></li>
<li><a class="reference internal" href="#first-quality-control">First Quality Control</a></li>
<li><a class="reference internal" href="#ingestion-into-sta-frost-server">Ingestion into STA Frost Server</a></li>
<li><a class="reference internal" href="#second-quality-control">Second Quality Control</a></li>
<li><a class="reference internal" href="#data-archive">Data archive</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    </body>
</html>